<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Client test Account Form</title>

   <!-- Bootstrap v5.1.3 style -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
   <div class="container-xxl border">
      <h1 class="display-3">FORM DATA</h1>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
         <a class="navbar-brand" href="#" set-view="/client/components/home.htm">HOME</a>
         <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
            aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
         </button>
         <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
               <a class="nav-item nav-link active" href="#" set-view="components/accountForm.htm"
                  set-script="js/accountControl.js">
                  Account control
               </a>
               <a class="nav-item nav-link active" href="#" set-view="components/fileForm.htm"
                  set-script="js/fileControl.js">
                  File Control
               </a>
            </div>
         </div>
      </nav>

      <div view>
         <!-- REPLACE CONTENT AT HERE -->
      </div>
   </div>

   <!-- Bootstrap v5.1.3 bundle scripts -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>
   <script src="js/index.js"></script>

   <!-- REPLACE LINK FILE SCRIPT AT HERE -->
   <script>
      const http = {
         get: (url = "") => http.request(url, "GET"),
         post: (url = "", body = {}) => http.request(url, "POST", body),
         put: (url = "", body = {}) => http.request(url, "PUT", body),
         delete: (url = "", body = {}) => http.request(url, "DELETE", body),
         request: async (
            url = "",
            method = 'GET',
            body = undefined,
            headers = {
               'Content-Type': 'multipart/form-data;boundary=U1RVREVWLUNPVVJBR0U='
            }
         ) => await fetch(url, { method, headers, body }).then(res => res.json())
      }

      const view = document.querySelector('[view]');
      const { body } = document;
      const listActions = document.querySelectorAll('[set-view]');

      listActions.forEach(set =>
         set.addEventListener('click', e => {
            let target = e.target, script = document.createElement('script');
            let sourceView = target.getAttribute('set-view');
            let sourceJS = target.getAttribute('set-script');

            rawFile(sourceView, value => {
               view.innerHTML = value; // set html
               body.removeAttribute(document.querySelector('script[script-replace]'));

               if (sourceJS) { //set file script if exist
                  script.setAttribute('src', sourceJS);
                  script.setAttribute('script-replace', null);
                  body.appendChild(script);
               }
            });
         })
      );

      const rawFile = (source, callback) =>
         fetch(source)
            .then(res => res.text())
            .then(res => callback(res))
            .catch(err => console.error(err));
   </script>
</body>

</html>